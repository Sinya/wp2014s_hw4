<!doctype html>
<html>

<head>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <meta property="og:title" content="Hello:) LongLong" >
    <meta property="og:type" content="Website" >
    <meta property="og:url" content="https://sinya.github.io/wp2014s_hw2/index.html" >
    <meta property="og:image" content="http://ellroy.weebly.com/uploads/1/1/4/6/11465436/9290781_orig.jpg" >
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Hello, I am hw4:)</title>
    <meta name="description" content=" ">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/style.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

   	<style>
    #canvas {border: 3px solid grey;}
    </style>
</head>

<body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&appId=695992260466129&version=v2.0";
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>

    <div class="Content">

    <section id="main">
        <h2>This is a HTML5 Canvas Pages with Facebook</h2>
        <canvas width="540" height="540" id="canvas"></canvas>
    </section>
    <div class="inputtext" style="width:600px; margin:0 auto;">
        <label for="inputed">輸入客製化文字：
            <textarea name="inputed" maxlength="6" id="inputed" placeholder="限輸6字"></textarea><!-- 提供使用者輸入文字欄-->
        </label>
        <br>
        <button id="sentimg" onClick="PostImageToFacebook()">Post to Facebook</button><!-- 傳送按鈕-->
    </div>
    <div class="info"></div><!-- 訊息欄位-->

        
    </div>
        <div class="fb-comments" data-href="http://sinya.github.io/wp2014s_hw2/index.html" data-numposts="5" data-colorscheme="dark"></div><br>

        <div class="fb-like" data-href="http://sinya.github.io/wp2014s_hw2/index.html" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div><br>


 


    <script type="text/javascript" src="js/script.js"></script>
</body>

<script>
window.fbAsyncInit = function () {
    FB.init({
    appId: '695992260466129', //api 2.0 nccu web test
    xfbml: true,
    version: 'v2.0'
    });
    
    FB.getLoginStatus(function (response) {
                if (response.status === 'connected') {

                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;
                    FB.api('/me', function (response) {
                        //console.log(response);
                        $("body").append('My links is' + response.link);
                         $("body").append('My Username is' + response.username); document.getElementsByTagName('body').innerHTML = ""
                         $("body").append('My ID is' + response.id);
                    });


                    FB.ui({
                        method: 'share',
                        href: 'https://github.com/Sinya/wp2014s_hw4/tree/gh-pages',
                    }, function (response) {});
                    
                    


                    FB.ui({
                        method: 'send',
                        link: 'https://www.facebook.com/SinyayaPeng',
                    });

                    FB.api('/me/likes', function (response) {
                        console.log(response)
                        for (var i = 0; i < response.data.length; i++){
                            console.log(response.data[i].name);
                            }
                    });
                    
                    FB.api('/me/picture?type=normal', function(response) { // normal/large/squere 
                        var str="<img src="+ response.data.url +">";
                        $('body').append(str);
                    });
                    
                    
                    
                    FB.api('/me/photos', 'post', {
                        name:"test",
                        message: 'this is parse photo',
                        url: "https://www.facebook.com/photo.php?fbid=10200792278284162&set=a.4178767322344.1073741825.1679244533&type=1&theater"//如果要init運行只能用絕對絕對路徑
                    }, function (response) {
                        if (!response || response.error) {
                            alert('Error occured:' + response);
                            console.log(response);
                        } else {
                            alert('Post ID: ' + response.id);
                        }
                    });

                } else if (response.status === 'not_authorized') {
                    console.log("this user is not authorizied your apps");
                    FB.login(function (response) {
                        // FB.api('/me/feed', 'post', {message: 'I\'m started using FB API'});
                        if (response.authResponse) { // if user login to your apps right after handle an event
                            window.location.reload();
                        };
                    }, {
                        scope: 'user_about_me,email,user_location,user_photos,publish_actions,user_birthday,user_likes'
                    });
                } else {
                    console.log("this isn't logged in to Facebook.");
                    FB.login(function (response) {
                        if (response.authResponse) {
                            window.location.reload();
                        } else {
                            //alertify.alert('An Error has Occurs,Please Reload your Pages');
                        }
                    });
                }
            });
        }; //<<<<<<<<<<<<<<<init end

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>


</html>


